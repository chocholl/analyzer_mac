[Установка]

Перед использованием рекомендуется проверить наличие требуемых модулей python.

Это можно сделать с помощью запуска скрипта check_modules.py

Если модуль отсутствует в системе будет запущена его установка.

Для запуска проверки необходимо выполнить:

$ Win+R -> cmd

[cmd] cd C:\Users\and_andreev\Desktop\git_repos\mac_arp\analyzer_mac\

[cmd] python ./check_modules.py


[Описание работы]

Конфигурация модуля задается в файле params.txt, пример ниже

a_list ["mac_10_44.csv","mac_10_46.csv","mac_10_48.csv"]
b_list ["mac_11_2.csv","mac_11_4.csv","mac_11_6.csv"]
a_list / b_list это списки имен файлов, содержащие выходные файлы сборщика до и после работ. 
Так как записи о mac адресах являются коротко живущими, для получения правдивой статистики желательно подавать на вход несколько файлов mac до работ и несколько после работ. 
Т.е. использовать следующую конфигурацию оболочки сборника
input run count: 3
input delay (s): 360   
Таким образом в слепок до/после попадаются мак адреса, которые фиксировались оборудованием на протяжении 3*360s
Алгоритм работы 
Анализатор составляет общий список mac адресов до и после работ путем склейки данных в файлах a_list (до) и b_list (после), и обсчитывает статистику.

Выходные файлы статистики
_mac1.csv, _mac2.csv – сборные файлы склейки, в которые заносятся записи mac в a_list и b_list
_mac_count_per_port.csv – сводная таблица «до/после» количества mac адресов по портам
_mac_count_per_vlan - сводная таблица «до/после» количества mac адресов по вланам
_mac_diff.csv – таблица, содержащая записи mac, которые присутствуют в файлах a_list и отсутствуют (или отличаются портом/вланом) в b_list, или наборот.
_mac_stable.csv – таблица, содержащая записи mac, которые остались неизменны.
_mac_diff_per_vlan_vs_mac_count_per_vlan.csv – сводная таблица количества маков по вланам с количество пропавших или добавившихся маков в данном влане, т.е. «было/стало/изменилось»
_mac_diff_per_port_vs_mac_count_per_port.csv – сводная таблица количества маков по портам с количество пропавших или добавившихся маков в данном порту, т.е. «было/стало/изменилось»
_nu_mac_1.csv – таблица неуникальных маков «до», в нее заносятся записи с одинаковым mac, которые фиксируются в разных вланах (router-on-stick)
_nu_mac_2.csv – таблица неуникальных маков «после», в нее заносятся записи с одинаковым mac, которые фиксируются в разных вланах (router-on-stick)
_unique_mac_1.csv – таблица «до» уникальных маков, т.е. маков, которые зафиксированы только в одном влане.
_unique_mac_2.csv – таблица «после» уникальных маков, т.е. маков, которые зафиксированы только в одном влане.
_mac_left.csv/_mac_right.csv - таблицы отличий «до/после» уникальных маков.
_mac_history_vlan.csv– таблица, в которую попадают уникальные маки, записи по которым зафиксированы «до» и «после», но записи отличаются номером влана.

_mac_history_port.csv– таблица, в которую попадают уникальные маки, записи по которым зафиксированы «до» и «после», но записи отличаются портом.
_mac_count_per_port_unique.csv, _mac_count_per_vlan_unique.csv, _mac_diff_unique.csv, _mac_stable_unique.csv, _mac_diff_per_vlan_vs_mac_count_per_vlan_unique.csv, _mac_diff_per_port_vs_mac_count_per_port_unique.csv – логика наполнения та-же, что у ранее описанных таблиц, но для расчета применяются только уникальные маки.
_age_mode_per_port.csv – среднее значение age «до/после» по портам
_age_mode_per_vlan.csv – среднее значение age «до/после» по вланам
_age_mode_per_port_vs_mac_count.csv - среднее значение age «до/после» по портам в сочетании с количеством маков на порту
_age_mode_per_vlan_vs_mac_count.csv - среднее значение age «до/после» по портам в сочетании с количеством маков во влане
